        <script>
            require([ "dojo/_base/connect",
                      "dijit/form/TextBox",
                      "dojo/_base/xhr",
                      "dojo/dom-style", 
                      "dojo/_base/lang",
                      "dijit/form/Button",
                      "dojox/form/Uploader",
                      "dojox/form/uploader/plugins/IFrame",
                      "dojo/parser"
                    ], function (connect, TextBox, xhr, domStyle, lang, Button, Uploader){
                        var csrf = new TextBox({
                                    type: "hidden",
                                    id: "uploadKeysCsrfmiddlewaretoken",
                                    value: "{{csrf_token}}",
                                    name: "csrfmiddlewaretoken"
                        }, document.createElement("input"));
                        var uploader = new Uploader({
                            id: "myUpload",
                            label: "Select file...",
                            name: "Upload Keys",
                            onSelect: function(e){alert("fsfa");}
                        }, document.createElement("input"));
                        uploader.startup(); 
                        var formNode = dojo.create("form", {
                                                id: 'myForm',
                                                enctype: "multipart/form-data"
                        });
                        formNode.appendChild(csrf.domNode);
                        formNode.appendChild(uploader.domNode);
                        dojo.byId('keyUploads').appendChild(formNode);
                        connect.connect(uploader, 'onChange', function(list){ 
                            dojo.require("dojo.io.iframe");
                            dojo.io.iframe.send({
                                 url: '/manage/sites/upload_keys',
                                 method: 'POST',
                                 form: 'myForm',
                                 handleAs: 'json',
                                 load: function(response, ioArgs) {
                                     dojo.hitch(this,showMessage(response));
                                     return true;
                                 },
                                 error: function(response, ioArgs) {
                                     dojo.hitch(this,showMessage(response));
                                     return true;
                                 }
                               }); 
                        });
            });
        </script> 
        <h1>Upload Keys to Key Registration</h1>
        <h3 style="font-weight:normal;">Should be in csv format<br/>
        Valid Fields (required in <span style="font-weight:bold;">bold</span>): <span style="font-weight:bold;">key</span>, <span style="font-weight:bold;">model</span>, <span style="font-weight:bold;">serial</span>, mac, board, fw, part</h3>
        <div id="keyUploads"></div>

        <br/>
